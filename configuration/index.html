
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://aceeric.github.io/desktop-kubernetes/configuration/">
      
      
        <link rel="prev" href="../command-line/">
      
      
        <link rel="next" href="../add-ons/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Configuration - Desktop Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Desktop Kubernetes" class="md-header__button md-logo" aria-label="Desktop Kubernetes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Desktop Kubernetes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuration
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/aceeric/desktop-kubernetes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Desktop Kubernetes" class="md-nav__button md-logo" aria-label="Desktop Kubernetes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Desktop Kubernetes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aceeric/desktop-kubernetes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../command-line/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Command Line
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-addons-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The addons Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-k8s-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The k8s Section
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The k8s Section">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-containerd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuring containerd
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-dns-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The dns Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-vbox-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The vbox Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-kvm-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The kvm Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-vm-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The vm Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-vms-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The vms Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-cluster-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The cluster Section
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../add-ons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add-Ons
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../external-dns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    External DNS
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../components-and-versions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Components and Versions
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../conformance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Conformance
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-addons-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The addons Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-k8s-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The k8s Section
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The k8s Section">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-containerd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuring containerd
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-dns-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The dns Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-vbox-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The vbox Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-kvm-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The kvm Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-vm-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The vm Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-vms-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The vms Section
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-cluster-section" class="md-nav__link">
    <span class="md-ellipsis">
      
        The cluster Section
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h1>
<p>The project includes a <code>config.yaml</code> file in the repo root that specifies the cluster configuration. The file is structured into the following sections:</p>
<table>
<thead>
<tr>
<th>Section</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>addons</code></td>
<td>A list of cluster add-ons to install, e.g.: CNI, CoreDNS, etc.</td>
</tr>
<tr>
<td><code>k8s</code></td>
<td>Kubernetes cluster configuration.</td>
</tr>
<tr>
<td><code>dns</code></td>
<td>Configuration for the <em>External DNS</em> Add-On.</td>
</tr>
<tr>
<td><code>kvm</code></td>
<td>KVM configuration.</td>
</tr>
<tr>
<td><code>vbox</code></td>
<td>VirtualBox configuration.</td>
</tr>
<tr>
<td><code>vm</code></td>
<td>VM configuration (common to KVM &amp; VirtualBox.)</td>
</tr>
<tr>
<td><code>vms</code></td>
<td>A list of VMs to create for the cluster, and their characteristics.</td>
</tr>
<tr>
<td><code>cluster</code></td>
<td>Populated by <em>Desktop Kubernetes</em> when a new cluster is provisioned.</td>
</tr>
</tbody>
</table>
<p>There is one top-level key with no subkeys: <code>virt</code>. This key determines whether KVM or VirtualBox will be used to provision and manage the VMs. The options are <code>virtualbox</code> and <code>kvm</code>. The default value is <code>kvm</code>. The reason is that KVM is significantly faster (and simpler) to provision VMs than VirtualBox.</p>
<h2 id="the-addons-section">The <code>addons</code> Section<a class="headerlink" href="#the-addons-section" title="Permanent link">&para;</a></h2>
<p>This section enables or disables the Add-Ons included with the CLI. See the <a href="../add-ons/">Add-Ons</a> section for more details. These are the default values:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Enabled by default?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>calico</code></td>
<td>&#x2718;</td>
</tr>
<tr>
<td><code>cilium</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>coredns</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>cert-manager</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>external-dns</code></td>
<td>&#x2718;</td>
</tr>
<tr>
<td><code>headlamp</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>ingress-nginx</code></td>
<td>&#x2718;</td>
</tr>
<tr>
<td><code>kube-prometheus-stack</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>kubernetes-dashboard</code></td>
<td>&#x2718;</td>
</tr>
<tr>
<td><code>metrics-server</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>nfs-provisioner</code></td>
<td>&#x2718;</td>
</tr>
<tr>
<td><code>nginx-gateway-fabric</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>openebs</code></td>
<td>&#10004;</td>
</tr>
<tr>
<td><code>vcluster</code></td>
<td>&#x2718;</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Add-Ons are listed in the order in which they are installed. <strong>This is important.</strong> Notice that the CNI is first, followed by Core DNS for service IP address resolution. The order after that is unimportant.</p>
</div>
<h2 id="the-k8s-section">The <code>k8s</code> Section<a class="headerlink" href="#the-k8s-section" title="Permanent link">&para;</a></h2>
<p>The <code>k8s</code> section has configuration settings that configure Kubernetes, independent of the virtualization that you choose.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="nowrap-column"><code>k8s.containerized-cplane</code></td>
<td>If specified, creates the control plane components as static pods on the controller VM like kubeadm, RKE2, et. al. (By default, Desktop Kubermetes creates the control plane components as as systemd units.) Allowed values: <code>all</code>, or any of: <code>etcd</code>, <code>kube-apiserver</code>, <code>kube-proxy</code>, <code>kube-scheduler</code>, <code>kube-controller-manager</code> (comma-separated.) E.g.: <code>etcd,kube-apiserver</code></td>
</tr>
<tr>
<td><code>k8s.cluster-cidr</code></td>
<td>Configures CIDR range for Pods. This is applied to the <code>kube-controller-manager</code>. (Be aware of <code>--node-cidr-mask-size...</code> args which you can't override at this time.)</td>
</tr>
<tr>
<td><code>k8s.cluster-dns</code></td>
<td>Ignored - not yet implemented.</td>
</tr>
<tr>
<td><code>k8s.kube-proxy</code></td>
<td>If true, you can run the cluster without Calico or Cilium (or other CNI) using the default CNI configuration that is established by <code>scripts/worker/containerd/install-containerd</code>.</td>
</tr>
<tr>
<td><code>k8s.containerd-mirror</code></td>
<td>Supports configuring <code>containerd</code> to mirror to a different registry. The example in the yaml has all images mirrored to a distribution server on 192.168.0.49:8080. Background: I use my own caching pull-only, pull-through <a href="https://github.com/aceeric/ociregistry">OCI distribution server</a> running as a systemd service on my desktop to mitigate DockerHub rate limiting. See the example immediately below.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Static pod container images for the containerized control plane per: https://kubernetes.io/releases/download/</p>
</blockquote>
<h3 id="configuring-containerd">Configuring <code>containerd</code><a class="headerlink" href="#configuring-containerd" title="Permanent link">&para;</a></h3>
<p>You can configure <code>containerd</code> to mirror with the following in the <code>config.yaml</code> file. Mirroring is disabled by default. You enable it by setting <code>enabled: true</code> and specifying the name and configuration. In the example, <strong>all</strong> images are mirrored (<code>name: _default</code> which is a special value recognized by <code>containerd</code>) and the mirror is http://192.168.0.49:8080.
<div class="highlight"><pre><span></span><code>k8s:
  containerd-mirror:
    enabled: true
    name: _default
    config: |
      [host.&quot;http://192.168.0.49:8080&quot;]
        capabilities = [&quot;pull&quot;, &quot;resolve&quot;]
        skip_verify = true
</code></pre></div></p>
<p>With the configuration above, as <em>Desktop Kubernetes</em> is installing <code>containerd</code> into each guest, it also configures mirroring at the same time.</p>
<h2 id="the-dns-section">The <code>dns</code> Section<a class="headerlink" href="#the-dns-section" title="Permanent link">&para;</a></h2>
<p>The <code>dns</code> section configures the External-DNS Add-On. <em>Desktop Kubernetes</em> uses the External-DNS Add-On to watch <code>Ingress</code> resources and configure <code>/etc/hosts</code> so that when you create an ingress with a host name, the host name is immediately DNS-resolveable. This means that after creating an ingress, you can use the address in your browser.</p>
<p>This requires you to run the included External DNS webhook server. See the <a href="../external-dns/">External DNS</a> section for details.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>domain</code></td>
<td>This is a comma-separated list of domain names that the webhook server will manage. E.g.: <code>dtk.io,mydomain.com</code>.</td>
</tr>
<tr>
<td><code>host-ip</code></td>
<td>The IP address of your desktop. This will be configured into the <code>external-dns</code> Helm chart as the URL of the webhook.</td>
</tr>
<tr>
<td><code>webhook-port</code></td>
<td>The port address of the webhook server running on your desktop. This is also configured into the <code>external-dns</code> Helm chart.</td>
</tr>
</tbody>
</table>
<h2 id="the-vbox-section">The <code>vbox</code> Section<a class="headerlink" href="#the-vbox-section" title="Permanent link">&para;</a></h2>
<p>This section is only used if <code>virt = virtualbox</code></p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="nowrap-column"><code>vbox.host-network-interface</code></td>
<td>The name of the primary network interface on your machine. The scripts use this to configure the VirtualBox bridge network for each guest VM. <strong>Important</strong>: you must specify this consistently when creating the template, and when creating a cluster from the template. The reason is that the option configures settings at the VM level that then propagate into the guest OS. Since guests are cloned from the template, the guest networking has to be defined consistently with the template. This config is mutually exclusive with <code>vbox.host-only-network</code>.</td>
</tr>
<tr>
<td><code>vbox.host-only-network</code></td>
<td>The left three octets of the network. E.g. <code>192.168.56</code>. (<em>For some additional information on this address, see</em>: <a href="https://www.virtualbox.org/manual/ch06.html">the VirtualBox docs</a> <em>section on "Host-Only Networking"</em>.) This option configures NAT + host only networking mode. The scripts will create a new host only network and configure the cluster to use it for intra-cluster networking, and will configure NAT for the cluster to access the internet. <em>See important note in the table entry immediately above regarding VBox networking type.</em> This config is mutually exclusive with <code>vbox.host-network-interface</code>.</td>
</tr>
<tr>
<td><code>vbox.vboxdir</code></td>
<td>The directory where you keep your VirtualBox VM files. The script uses the <code>VBoxManage</code> utility to create the VMs, which will in turn create a sub-directory under this directory for each VM. If empty, the script will get the value from VirtualBox. The directory must exist. The script will not create it.</td>
</tr>
<tr>
<td><code>vbox.kickstart</code></td>
<td>Specifies the name of the kickstart file to configure the OS. The file has to be in the <code>kickstarts</code> directory. The default is <code>vbox.text.ks.cfg</code> which is a non-graphical install.</td>
</tr>
</tbody>
</table>
<h2 id="the-kvm-section">The <code>kvm</code> Section<a class="headerlink" href="#the-kvm-section" title="Permanent link">&para;</a></h2>
<p>This section is only used if <code>virt = kvm</code></p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>kvm.network</code></td>
<td>This is set to <code>nat</code> in the configuration file. This setting is actually ignored because NAT is the only KVM networking option currently implemented but stating that in the configuration makes it more self-documenting.</td>
</tr>
<tr>
<td><code>kvm.kickstart</code></td>
<td>The kickstart file used when creating a template VM. Kickstart files are in the <code>kickstarts</code> directory of the project. The default is <code>kvm.text.ks.cfg</code>.</td>
</tr>
<tr>
<td class="nowrap-column"><code>kvm.os-variant</code></td>
<td>Has to align with OS ISO. (Values from <code>virt-install --os-variant list</code>.) Default is <code>almalinux9</code>.</td>
</tr>
</tbody>
</table>
<h2 id="the-vm-section">The <code>vm</code> Section<a class="headerlink" href="#the-vm-section" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>vm.linux</code></td>
<td>Determines the Linux variant.  Valid values are <code>alma9</code> for Alma 9.7 (the default), <code>alma8</code> for Alma 8.10, <code>centos9</code> for CentOS 9 Stream, and <code>rocky</code> for Rocky Linux. Ignored unless <code>vm.create-template</code> is specified. <strong>CentOS and Rocky are un-tested.</strong> (It's on the to-do list.)</td>
</tr>
<tr>
<td><code>vm.create-template</code></td>
<td>Values are <code>true</code> (the  default) or <code>false</code>. Causes the script to create a template VM before bringing up the cluster. (This step by far takes the longest.) The template is then used to clone all the cluster nodes. If <code>false</code>, the script expects to find an existing VM to clone from per the <code>vm.template-vmname</code> setting. You can override this with command line arg <code>--create-template=true\|false</code>. <strong>This setting must be <code>true</code> for the very first cluster you create - meaning - you have to create a template at least once.</strong></td>
</tr>
<tr>
<td class="nowrap-column"><code>vm.template-vmname</code></td>
<td>Specifies the template VM name to create - or clone from.</td>
</tr>
</tbody>
</table>
<h2 id="the-vms-section">The <code>vms</code> Section<a class="headerlink" href="#the-vms-section" title="Permanent link">&para;</a></h2>
<p>This section has a list of dictionaries. Each element in the list is a VM to create and to install the Kubernetes components in.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>vms</code></td>
<td>This is a list of VMs to create. Each VM in the list specifies the following keys:</td>
</tr>
<tr>
<td><code>vms[n].name</code></td>
<td>The VM Name.</td>
</tr>
<tr>
<td><code>vms[n].cpu</code></td>
<td>Number of CPUs.</td>
</tr>
<tr>
<td><code>vms[n].mem</code></td>
<td>Memory in MB. E.g.: <code>8192</code> = 8 gig.</td>
</tr>
<tr>
<td><code>vms[n].ip</code></td>
<td>The rightmost octet of the IP address for the host. Ignored unless <code>virt=virtualbox</code> and <code>vbox.host-only-network</code> is configured. So, for example, if <code>vbox.host-only-network</code> is <code>192.168.56</code> and this <code>ip</code> value is <code>200</code>. then the IP address assigned to the host-only interface in the VM is <code>192.168.56.200</code>.</td>
</tr>
<tr>
<td><code>vms[n].disk</code></td>
<td>Only supported if <code>virt=kvm</code> at this time. Resizes the disk to the specified number which is interpreted as Gi.</td>
</tr>
<tr>
<td class="nowrap-column"><code>vms[n].pod-cidr</code></td>
<td>Used to configure CNI for containerd. <strong>As soon as Cilium or Calico are installed then this configuration is rendered inert.</strong></td>
</tr>
</tbody>
</table>
<h2 id="the-cluster-section">The <code>cluster</code> Section<a class="headerlink" href="#the-cluster-section" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cluster</code></td>
<td>Contains cluster information for the add-ons. Populated (overwritten) by <code>scripts/addons/install-addons</code>. Avoid editing this as it will be overwritten whenever a cluster is provisioned.</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../command-line/" class="md-footer__link md-footer__link--prev" aria-label="Previous: The Command Line">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                The Command Line
              </div>
            </div>
          </a>
        
        
          
          <a href="../add-ons/" class="md-footer__link md-footer__link--next" aria-label="Next: Add-Ons">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Add-Ons
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.footer"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>